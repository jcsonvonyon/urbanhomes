const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auth-logger-D64jFNGW.js","assets/auth-Wv6XBAm1.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{a as P,g as T,b as L,_ as x}from"./auth-Wv6XBAm1.js";async function w(){console.log("Testing Supabase connection..."),console.log("Supabase URL:","https://tqvmqodeoxanuxfxsltt.supabase.co"),console.log("Has Anon Key:",!0);try{const{data:a,error:c}=await P.auth.getSession();return c?(console.error("Session check error:",c),!1):(console.log("Supabase connected successfully"),console.log("Current session:",a.session?"Active":"None"),!0)}catch(a){return console.error("Connection test failed:",a),!1}}typeof window<"u"&&(window.testSupabaseConnection=w);w();document.addEventListener("DOMContentLoaded",async function(){const{session:a}=await T();if(a){window.location.href="dashboard.html";return}const c=document.querySelector(".auth-form"),l=c.querySelector(".submit-btn");c.addEventListener("submit",async function(t){var g,h,p,y;t.preventDefault();const e=new FormData(this),i=e.get("email"),n=e.get("firstName"),u=e.get("lastName"),r=e.get("phone"),d=e.get("password"),S=e.get("terms");if(!i||!n||!u||!r||!d){o("Please fill in all required fields","error");return}if(!S){o("Please accept the Terms of Service and Privacy Policy","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){o("Please enter a valid email address","error"),document.getElementById("email").focus();return}if(d.length<8){o("Password must be at least 8 characters long","error"),document.getElementById("password").focus();return}const A=l.innerHTML;l.innerHTML='<i class="fas fa-spinner fa-spin"></i> Creating Account...',l.disabled=!0,this.classList.add("submitting");const{data:s,error:m}=await L(i,d,n,u,r);if(m){console.error("Sign up error:",m),l.innerHTML=A,l.disabled=!1,this.classList.remove("submitting"),m.message.includes("already registered")||m.message.includes("User already registered")?o("An account with this email already exists. Please sign in instead.","error"):o(m.message||"Failed to create account. Please try again.","error");return}if(console.log("Sign up response:",{hasSession:!!(s!=null&&s.session),hasUser:!!(s!=null&&s.user),userEmail:(g=s==null?void 0:s.user)==null?void 0:g.email,emailConfirmed:(h=s==null?void 0:s.user)==null?void 0:h.email_confirmed_at,identities:(y=(p=s==null?void 0:s.user)==null?void 0:p.identities)==null?void 0:y.length}),s&&s.user)if(s.session){try{const{logAuthEvent:f}=await x(async()=>{const{logAuthEvent:E}=await import("./auth-logger-D64jFNGW.js");return{logAuthEvent:E}},__vite__mapDeps([0,1]));await f(s.user.id,"signup",{email:i})}catch(f){console.warn("Failed to log auth event:",f)}o("Account created successfully! Redirecting to dashboard...","success"),setTimeout(()=>{window.location.href="dashboard.html"},1e3)}else s.user.identities&&s.user.identities.length===0?(o("Account created! Please check your email to verify your account before signing in.","success"),setTimeout(()=>{window.location.href="signin.html"},3e3)):(o("Account created successfully! You can now sign in.","success"),setTimeout(()=>{window.location.href="signin.html"},2e3));else o("Account created! Please check your email to confirm your account.","success"),setTimeout(()=>{window.location.href="signin.html"},2e3)});function o(t,e="info"){document.querySelectorAll(".alert-message").forEach(d=>d.remove());const n=document.createElement("div");n.className=`alert-message ${e}`;const u=e==="success"?"fa-check-circle":e==="error"?"fa-exclamation-circle":"fa-info-circle";n.innerHTML=`<i class="fas ${u}"></i> ${t}`;const r=document.querySelector(".form-container");r.insertBefore(n,r.firstChild),e!=="success"&&setTimeout(()=>{n.parentNode&&n.remove()},5e3)}document.getElementById("password").addEventListener("input",function(){const t=this.value,e=v(t);b(e)});function v(t){let e=0;return t.length>=8&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/[0-9]/.test(t)&&e++,/[^A-Za-z0-9]/.test(t)&&e++,e}function b(t){let e=document.querySelector(".password-strength");e||(e=document.createElement("div"),e.className="password-strength",document.querySelector("#password").parentNode.appendChild(e));const i=["Very Weak","Weak","Fair","Good","Strong"],n=["#ef4444","#f97316","#eab308","#22c55e","#16a34a"];if(t===0){e.style.display="none";return}e.style.display="block",e.innerHTML=`
            <div class="strength-bar">
                ${Array(5).fill(0).map((u,r)=>`<div class="strength-segment ${r<t?"active":""}" style="background-color: ${r<t?n[t-1]:"#e5e7eb"}"></div>`).join("")}
            </div>
            <span class="strength-text" style="color: ${n[t-1]}">${i[t-1]}</span>
        `}});
