import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               */import{g as d,r as f,s as u}from"./auth-Wv6XBAm1.js";document.addEventListener("DOMContentLoaded",async function(){const{session:c}=await d();if(c){window.location.href="dashboard.html";return}sessionStorage.getItem("session_expired")==="true"&&(sessionStorage.removeItem("session_expired"),e("Your session has expired. Please sign in again.","error"));const a=document.querySelector(".auth-form"),r=a.querySelector(".submit-btn");document.getElementById("resendVerification").addEventListener("click",async function(t){t.preventDefault();const i=document.getElementById("email").value.trim();if(!i){e("Please enter your email address first","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){e("Please enter a valid email address","error");return}this.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...',this.style.pointerEvents="none";const{error:n}=await f(i);if(this.innerHTML="Didn't receive confirmation email?",this.style.pointerEvents="auto",n){e(n.message||"Failed to resend confirmation email","error");return}e("Confirmation email sent! Please check your inbox.","success")}),a.addEventListener("submit",async function(t){t.preventDefault();const i=document.getElementById("email").value.trim(),o=document.getElementById("password").value;if(!i||!o){e("Please enter your email and password","error");return}const n=r.innerHTML;r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Signing in...',r.disabled=!0;const{data:l,error:s}=await u(i,o);if(s){r.innerHTML=n,r.disabled=!1,s.message.includes("Invalid login credentials")?e("Invalid email or password. Please try again.","error"):s.message.includes("Email not confirmed")?e("Please confirm your email address before signing in. Check your inbox for the confirmation link.","error"):s.message.includes("email")&&s.message.includes("confirm")?e("Please verify your email address. Check your inbox for the confirmation link.","error"):e(s.message||"Failed to sign in. Please try again.","error");return}e("Sign in successful! Redirecting to dashboard...","success"),setTimeout(()=>{window.location.href="dashboard.html"},1e3)});function e(t,i="info"){document.querySelectorAll(".alert-message").forEach(m=>m.remove());const n=document.createElement("div");n.className=`alert-message ${i}`;const l=i==="success"?"fa-check-circle":i==="error"?"fa-exclamation-circle":"fa-info-circle";n.innerHTML=`<i class="fas ${l}"></i> ${t}`;const s=document.querySelector(".form-container");s.insertBefore(n,s.firstChild),i!=="success"&&setTimeout(()=>{n.parentNode&&n.remove()},5e3)}});
